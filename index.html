<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="author" content="John F. Black">
        <meta name="description" content="Test site for John F. Black">
        <title>BlackHoleJohn</title>
        <link rel="stylesheet" href="styles.css">
        <!-- Header Bidding Configs -->
        <script>

          var videoAdUnit = {
            code: 'video1',
            sizes: [[640, 480]],
            mediaType: 'video',
            bids: [
              {
                bidder: 'audienceNetwork',
                params: {
                  placementId: '	118220978561571_364707690579564',
                  video: {
                    skipppable: true,
                    playback_method: ['auto_play_sound_off']
                  }
                }
              }
            ]
          };

          var pbjs = pbjs || {};
          pbjs.que = pbjs.que || [];

        </script>

        <!-- Boilerplate -->

        <script type="text/javascript" src="" async></script>
          <script>

            pbjs.bidderSettings = {
                    standard: {
                        adserverTargeting: [
                            {
                                key: "hb_bidder",
                                val: function (bidResponse) {
                                    return bidResponse.bidderCode;
                                }
                            }, {
                                key: "hb_size",
                                val: function (bidResponse) {
                                    return bidResponse.size;
                                }
                            }, {
                                key: "hb_adid",
                                val: function (bidResponse) {
                                    return bidResponse.adId;
                                }
                            }, {
                                key: "hb_pb",
                                val: function (bidResponse) {
                                    return bidResponse.pbMg;
                                }
                            }
                        ]
                    },

                };

                pbjs.que.push(function(){
                  pbjs.addAdUnits(videoAdUnit);

                  pbjs.requestBids({
                    timeout : 700,
                    bidsBackHandler : function(bids) {
                      try {
                        url = bids.video.bids[0].vastUrl;
                      } catch (e) {}

                      var adserverTag = 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/27721068/an_video_page/instream_test&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]';

                      var options = {
                        'adserver': 'dfp',
                        'code': 'video'
                      };

                      var masterTagUrl = pbjs.buildMasterVideoTagFromAdserverTag(adserverTag, options);

                      invokeVideoPlayer(masterTagUrl);
                    }
                  });
                });

          </script>


    </head>

    <body>

      <div class="example-video-container">
        <video id="vid1" class="video-js vjs-default-skin vjs-big-play-centered" controls
          data-setup='{}'
          width='640'
          height='480'
        >
          <source src="http://vjs.zencdn.net/v/oceans.mp4" type='video/mp4'/>
          <source src="http://vjs.zencdn.net/v/oceans.webm" type='video/webm'/>
          <source src="http://vjs.zencdn.net/v/oceans.ogv" type='video/ogg'/>
        </video>
      </div>

      <script>

      var vid1 = videojs('vid1');

      function invokeVideoPlayer(url) {
        videojs("vid1").ready(function() {
          var player = this;
          var vastAd = player.vastClient({
            adTagUrl: url,
            playAdAlways: true,
            vpaidFlashLoaderPath: "https://github.com/MailOnline/videojs-vast-vpaid/blob/RELEASE/bin/VPAIDFlash.swf?raw=true",
            autoplay: true
          });
          player.muted(true);
          player.play();
        });
      }

      </script>

    </body>
</html>
